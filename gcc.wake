publish compileC flags headers file =
  def obj = replace "\\.c(pp)?$" ".o" file
  def cmdline = which "g++", flags ++ ("-c", file, "-o", obj, nil)
  def result = job cmdline (file, headers)
  result.output

publish linkO flags objs file =
  def cmdline = (which "g++", "-o", file, objs) ++ flags
  def result = job cmdline objs
  result.output
