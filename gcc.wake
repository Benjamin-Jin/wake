publish compileC flags headers file =
  def obj = replace "\\.c(pp)?$" ".o" file
  def cmdline = "/usr/bin/g++", flags ++ ("-c", file, "-o", obj, nil)
  def result = simple_job "." "" nil cmdline (file, headers) (obj, nil)
  result.outputs.head

publish linkO flags objs file =
  def cmdline = "/usr/bin/g++", flags ++ ("-o", file, objs)
  def result = simple_job "." "" nil cmdline objs (file, nil)
  result.outputs.head
