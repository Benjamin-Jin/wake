publish compileC flags headers file =
  def obj = replace "\\.c(pp)?$" ".o" file
  def cmdline = "/usr/bin/g++", flags ++ ("-c", file, "-o", obj, nil)
  def result = job "." cmdline (file, headers)
  result.outputs.head

publish linkO flags objs file =
  def cmdline = "/usr/bin/g++", flags ++ ("-o", file, objs)
  def result = job "." cmdline objs
  result.outputs.head
