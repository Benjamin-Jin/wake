global def cp x y =
  job (which "cp", x.getPathName, y, Nil) (makePath "{y}/..", x, Nil)

global def installAs dest file =
  def cmd = which "cp", file.getPathName, dest, Nil
  def inputs = file, Nil
  def foutputs _ = dest, Nil
  def doit _ =
    makeManualPlan cmd inputs foutputs
    | setPlanEnvironment Nil
    | runJob
    | getJobOutputs
  waitAll (doit _) (mkdir 0775 "{dest}/..")

global def installIn dir file =
  def dest = simplify "{dir}/{file}"
  installAs dest file
